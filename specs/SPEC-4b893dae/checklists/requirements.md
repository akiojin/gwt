# 要件チェックリスト: ブランチサマリーパネル

**目的**: SPEC-4b893daeの機能要件が正しく定義され、テスト可能であることを確認する
**作成日**: 2026-01-19
**機能**: [spec.md](../spec.md)

## パネル表示（基本）

- [ ] CHK001 FR-001: フッター領域への常時表示が明確に定義されている
- [ ] CHK002 FR-002: タイトル形式`[branch_name] Details`が具体的に定義されている
- [ ] CHK003 FR-003: 高さ10-15行の固定値が測定可能な基準として定義されている
- [ ] CHK004 FR-004: 枠線表示の要件がRatatui実装と整合している
- [ ] CHK005 FR-005: ブランチ選択変更時の更新トリガーが明確
- [ ] CHK006 FR-006: 既存`Worktree:`表示との統合方法が明確

## コミットログセクション

- [ ] CHK010 FR-010: 表示件数3-5件の範囲指定が適切（固定値vs動的を検討）
- [ ] CHK011 FR-011: ハッシュ7桁+メッセージ形式が既存gitログ形式と整合
- [ ] CHK012 FR-012: 末尾省略`...`の実装方法がRatatuiの文字幅計算と整合
- [ ] CHK013 FR-013: コミットなしケースの表示文言が統一されている

## 変更統計セクション

- [ ] CHK020 FR-020: `Stats:`ラベルの表示位置が明確
- [ ] CHK021 FR-021: `N files, +X/-Y lines`形式がdiff統計と整合
- [ ] CHK022 FR-022: 未コミット検出がSPEC-d2f4762aの既存ロジックと同一
- [ ] CHK023 FR-023: 未プッシュ検出がSPEC-d2f4762aの既存ロジックと同一
- [ ] CHK024 FR-024: 安全性判定データ共有の実装方法が明確

## ブランチメタデータセクション

- [ ] CHK030 FR-030: `Meta:`ラベルの表示位置が明確
- [ ] CHK031 FR-031: ahead/behind表示形式`↑N ↓M from <upstream>`がASCII制約を満たす
- [ ] CHK032 FR-032: 相対日時表示の基準時刻と形式が明確（`2 days ago`等）
- [ ] CHK033 FR-033: ベースブランチ情報の取得元が明確（upstream vs defaultBaseBranch）
- [ ] CHK034 FR-034: upstream未設定時の表示仕様が明確

## AIサマリーセクション

- [ ] CHK040 FR-040: AI設定有効/無効の判定条件が明確（APIキー存在等）
- [ ] CHK041 FR-041: 2-3行箇条書きの行数制限が実装可能
- [ ] CHK042 FR-042: AI設定無効時のセクション非表示が他セクションに影響しない
- [ ] CHK043 FR-043: APIエラー時のグレースフルデグラデーションが明確
- [ ] CHK044 FR-044: バッチプリフェッチのタイミングと対象（Worktree有ブランチ）が明確
- [ ] CHK045 FR-045: メモリキャッシュの有効範囲（セッション中）が明確

## AI設定（プロファイル連携）

- [ ] CHK050 FR-050: プロファイルへの設定項目追加がSPEC既存形式と整合
- [ ] CHK051 FR-051: OpenAI互換APIの定義（エンドポイント、認証、レスポンス形式）が明確
- [ ] CHK052 FR-052: 環境変数フォールバックの優先順位が明確
- [ ] CHK053 FR-053: デフォルトエンドポイント`https://api.openai.com/v1`が適切

## データ取得

- [ ] CHK060 FR-060: バックグラウンド取得がUIブロッキングを防止する実装方法が明確
- [ ] CHK061 FR-061: ローディング表示のASCIIスピナー形式が既存と統一
- [ ] CHK062 FR-062: `(Failed to load)`表示時のリトライ方法が検討されている
- [ ] CHK063 FR-063: Worktreeなしブランチでのコミットログのみ表示が明確

## エッジケース網羅性

- [ ] CHK070 Worktreeなしブランチの振る舞いが全セクションで定義されている
- [ ] CHK071 コミットなしブランチの振る舞いが定義されている
- [ ] CHK072 detached HEAD状態の振る舞いが定義されている
- [ ] CHK073 リモートブランチ選択時の振る舞いが定義されている
- [ ] CHK074 データ取得失敗時のフォールバックが定義されている
- [ ] CHK075 ターミナルサイズ制約時の振る舞いが定義されている

## 成功基準の測定可能性

- [ ] CHK080 SC-001: 200ms応答時間が自動テストで測定可能
- [ ] CHK081 SC-002: 500msコミットログ表示開始が測定可能
- [ ] CHK082 SC-003: 安全性判定との同時表示が検証可能
- [ ] CHK083 SC-004: 100msプリフェッチ済みサマリー表示が測定可能
- [ ] CHK084 SC-005: スクロール滑らかさの定義と測定方法が明確
- [ ] CHK085 SC-006: APIエラー時の他セクション表示継続が検証可能
- [ ] CHK086 SC-007: 80%ユーザー理解度の測定方法が検討されている

## 注記

- 完了した項目にチェックマーク: `[x]`
- 不明点や要確認事項はインラインでコメント追加
- 関連SPECへの参照: SPEC-d2f4762a（ブランチ選択画面）
