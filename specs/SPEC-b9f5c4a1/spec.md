# ログ運用統一仕様

**作成日**: 2025-12-11

## 背景
- 画面に表示するメッセージと、永続的に保管するログの区別が曖昧だった。
- 構造化ログの出力方式が機能ごとにばらついているため、ツール全体で統一する。

## 定義
- **画面出力**: 標準出力・標準エラーに表示されるメッセージ。ログとは呼ばない。
- **ログ**: ファイルに書き出す永続的な記録。構造化（JSON）形式とする。

## 必須要件
1. **ロガー実装**: ログ出力は pino を用いること（構造化ログ, JSON）。
2. **出力先**: ログはファイルへ書き出すこと（画面出力と混在させない）。
3. **区別**: 画面出力で「ログ」「log」という語を使わず、ガイダンス/通知など適切な文言にすること。
4. **共通フォーマット**: タイムスタンプ・level・message を必須フィールドとし、追加フィールドはオブジェクトで付与する。
5. **環境変数**: ログレベルや出力パスを環境変数で上書きできるようにする（設計詳細は実装時に定義）。
6. **ローテーション**: ログファイルは 7 日間でローテーション（保持）し、1 日あたりのサイズ上限は設けない。

## 非機能
- 機能追加に伴うパフォーマンス劣化を最小化する（pino 標準設定を基本とする）。
- PII/シークレットは既存仕様に従いマスクする。

## 対象範囲
- gwt CLI / Web UI / サーバーコンポーネントの全ログ。

## 移行ガイド
- 既存の console ベースのログ出力は、画面出力とログファイル出力に役割分担する。
- 段階的移行を許容するが、新規機能は本仕様に従うこと。
